{% extends "::base.html.twig" %}

{% block stylesheets %}
	{{ parent() }}
	<link href="{{ asset('bundles/raykupage/css/innerstyle.css') }}" type="text/css" rel="stylesheet" media="screen" />
{% endblock %}

{% block content %}
<div class="dashboard">
    <!--Sidebar-->
		<div class="large-3 columns sidebar">
    		<div class="row tutor-sidebar">
                <div class="small-12 columns tutor-label">
                    <h5>Tutor</h5>
                    <div class="tutor-switch">
                        <label><input type="radio" name="toggle" id="tutorOn" {% if app.user.isTutor %} checked="checked"{% endif %}><span>On</span></label>
                        <label><input type="radio" name="toggle" id="tutorOff" {% if app.user.isTutor == false %} checked="checked"{% endif %}><span>Off</span></label>
                    </div>
    		    </div>
    		</div>
            <div class="row tutor-status-bar">
                <div class="small-12 columns tutor-status">
                    <h5>Status <span>Online</span></h5>
                </div>
            </div>

            <div class="row tutor-selected">
                <h5><span class="tutor-count">0</span> <span class="tright">Tutor(s) Selected</span> </h5>
                <div class="small-12 columns">
                    <ol id="selectedTutors">
                    </ol>
                    <a href=# class="clear-tutors">Clear All</a>
                </div>
            </div>
		</div>
    <!--End Sidebar-->

    <!--Main Content-->
	<div class="large-9 columns main-content">
        <!-- User Profile -->
        <div class="row user-profile">
            <div class="large-12 columns user-profile-top">
                <h6>760.00RP</h6>
                <h5>Student</h5>
            </div>

            <div class="large-3 columns user-profile-image">
                <img src="{{ asset('bundles/raykupage/images/profile_image_blank.jpg') }}">
            </div>  
            <div class="large-9 columns user-profile-info">
                <ul>
                    <li><h4>Nick Agopoulos</h4></li>
                    <li><h5>3rd Year, Undergraduate</h5></li>
                    <li><h6>Lives in <a>Toronto, Canada</a></h6></li>
                    <li><span>Email:</span> nick@rayku.com</li>
                    <li><span>School:</span> Ryerson University</li>
                    <li><span>Degree:</span> Economics</li>
                    <li><span>Biography:</span> This is longer content Donec id elit non mi porta gravida at eget metus.</li>
                </ul>
                <ul class="user-profile-buttons">
                    <li><a href=# class="bbutton"><span class="raphael">></span>Edit Profile</a></li>
                </ul>
            </div>
            <!--End Profile Info-->
            <div class="large-12 columns user-divider">
            </div>
            <!--Ask Form-->
            <div class="large-12 columns ask">
              <form class="custom">
                <div class="row">
                  <div class="large-3 columns ask-q">
                    <h5>Find suitable tutor for</h5>
                  </div>
                  <div class="large-3 columns school">
                    <!--
                    <select id="schoolSelect" class="medium" name="school">
                      <option>Choose Institution</option>
                      <option value="high school" name="selectlevel">High School</option>
                      <option value="university" name="selectlevel">University</option>
                    </select>
                    //-->
                  </div>

                  <div class="large-3 columns institution" id="placeholder">
                    <!--
                    <select id="instSelect" class="medium" disabled>
                        <option value="Choose" name="choose" id="choose">Select An Institution</option>
                    </select>
                    //-->
                  </div>

                  <div class="large-3 columns institution" id="highschool">
                    <!--
                    <select name="highschool" class="medium" disabled>
                        <option value="Choose" name="choose" id="choose">Choose Grade</option>
                        <option value="grade 1">Grade 1</option>
                        <option value="grade 2">Grade 2</option>
                        <option value="grade 3">Grade 3</option>
                        <option value="grade 4">Grade 4</option>
                        <option value="grade 5">Grade 5</option>
                        <option value="grade 6">Grade 6</option>
                        <option value="grade 7">Grade 7</option>
                        <option value="grade 8">Grade 8</option>
                        <option value="grade 9">Grade 9</option>
                        <option value="grade 10">Grade 10</option>
                        <option value="grade 11">Grade 11</option>
                        <option value="grade 12">Grade 12</option>
                    </select>
                    //-->
                  </div>
                  <div class="large-3 columns institution" id="university">
                    <!--
                    <select name="university" class="medium" disabled>
                        <option value="Choose" name="choose" id="choose">Choose Year</option>
                        <option value="year 1">Year 1</option>
                        <option value="year 2">Year 2</option>
                        <option value="year 3">Year 3</option>
                        <option value="year 4">Year 4</option>
                        <option value="year 5">Year 5</option>
                    </select>
                    //-->
                  </div>

                  <div class="large-3 columns category">
                    <select id="categorySelect" class="medium" name="category">
                      <option>Choose Category</option>
                      <option value="General Math">General Math</option>
                      <option value="Pre-Algebra">Pre-Algebra</option>
                      <option value="Geometry">Geometry</option>
                      <option value="Algebra">Algebra</option>
                      <option value="Trigonometry">Trigonometry</option>
                      <option value="Calculus">Calculus</option>
                      <option value="Statistics">Statistics & Probability</option>
                      <option value="Advanced Math">Advanced Math</option>
                    </select>
                  </div>

                  <div class="large-12 columns question-container">
                    <div class="input-container">
                      <input type="text" placeholder="What is your question? Or view online tutors" name="ask">
                    </div>
                    <input type="submit" class="bbutton" value="View Online Tutors" name="aSubmit">
                  </div>
                </div>
              </form>
            </div>
            <!--End Ask Form-->
        </div>

      
    <!--Tutor List-->
    <div class="row tutor-list">
     Loading ...
    </div>
  </div>
  <!--End Tutor List-->
</div>

{% render url('rayku_tutor_new') %}

<script type="text/javascript">
$(document).ready(function(){
    //Submit Question
    $('input[name="aSubmit"]').click(function(e){
    	e.preventDefault();
    	$('.tutor-list').html('Loading ... ');
        $.ajax('{{path('rayku_tutor')}}')
		    .always(function(xhr, status) { 
				if(status === 'error' || !xhr.responseText){
					$('.tutor-list').html('There was an error loading tutors');
				}else{
					$('.tutor-list').html(xhr.responseText);
				}
			});
        $('.tutor-list').fadeIn('slow');
        $('.tutor-selected').fadeIn('fast');
        
        
        //disable all checkboxes for tutors that are busy
        $('form#tutorList :input').each(function(){
            var input = $(this);
            if($(this).attr("data-tutor-status") == 1){
                $(this).attr('disabled', true);
            }
        });
        
        /*
        var question = $('input[name="ask"]').val(); //get the question typed by user
        $('p.user-question').html("\"" + question +"\""); //append question to header div
        var institution = $('#schoolSelect option:selected').val();
        var category = $('select[name="category"]').val();
        var level;
        if(institution == "high school"){
            level = $('select[name="highschool"]').val();
        }
        else if(institution == "university"){
            level = $('select[name="university"]').val();
        }
        else{
            level = "";
        }
        console.log(institution + " " + level + " " + category);
        */
    });

    //set all busy tutors to show a red background
    $('table#tutorTable tr td').each(function(){
        var column = $(this);
        console.log(column);
        if(column.hasClass('busy')){
            column.find('a').addClass('tutor-busy');
        }
    });
});
</script>

{% endblock %}